

@model ServiceOne.Models.ZONASI

@using (Html.BeginForm("Create", "Zonasi", FormMethod.Post, new { @class = "form", id = "create-edit-form" }))
{
    <div class="modal-header">
        <h4 class="modal-title">@ViewBag.Header</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>
    <div class="modal-body">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <input type="hidden" id="id" name="id" value="@ViewBag.Id" />
        <input type="hidden" id="user_id" name="user_id" value="@ViewBag.UserId" />
        <table id="table1" class="table dataTable no-footer dtr-inline" style="width:100%">
            <thead>
                <tr>
                    <th width="10%">
                        Area_Name
                    </th>
                    <th>
                        Address
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in ViewBag.Zona)
                {
                    if (item.selected == 1)
                    {
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="zona_id" value="@item.id" id="@item.id" checked="@item.selected" />
                                    <label class="form-check-label" for="flexCheckDefault">@item.area_name</label>
                                </div>
                            </td>
                            <td>
                                @item.address
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="zona_id" value="@item.id" id="@item.id" />
                                    <label class="form-check-label" for="flexCheckDefault">@item.area_name</label>
                                </div>
                            </td>
                            <td>
                                @item.address
                            </td>
                        </tr>
                    }

                }
            </tbody>
        </table>

    </div>
    <div class="modal-footer">
        <input id="btn-save" type="button" value="Submit" class="btn btn-default" />
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
}

<script>
    $(document).ready(function () {
        $("#btn-save").click(function () {
            var data = $("#create-edit-form").serialize();
            $.ajax({
                type: "POST",
                url: "@Url.Action("Create", "Zonasi")",
                data: data
            }).done(function (response) {
                if (response.result.Message == "ValidationError") {
                    $("#modal-default .modal-content").html(response.partialView);
                }
                else {
                    if (response.result.IsSucceed) {
                        swal({
                            title: "Success",
                            text: response.result.Message,
                            type: "success"
                        }).then(function () {
                            window.location.href = location.protocol + "//" + location.host + "@Url.Action("Details")" + "/" + response.result.id + "?user_id=" + response.result.user_id
                        })
                    }
                    else {
                        swal("Failed", response.result.Message, "error");
                    }
                }
            }).fail(function () {

            });
        });
    });
</script>
<script>
    $(function () {
        $("#table1").DataTable(

        );
    });
</script>
